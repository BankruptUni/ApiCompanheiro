const repository = await import("../repository/usuarioRepository");
const repoTrajeto = await import("../repository/trajetoRepository");
const repoBicicleta = await import("../repository/bicicletaRepository");

/**Método de aquisição dos objetos do banco via Id
 * @param id Id da requisição
 */
const findById = async(id = NaN, pool) => {
    let conn;
    try { 
        let query = repository.GetAll();
        conn = await pool.getConnection();

        const rows = await conn.query(query);
        return {
            ok: true,
            objeto: rows, 
            count: 0
        };
    }
    catch(exception) { 
        if(conn) {
            conn.end;
        }
        throw exception;
    }
}
/** Método para gravação de registro na tabela Estacao
 * @param objeto Registro passado pela api
*/
const gravar = async(objeto = {}, pool) => {
    let conn;
    let retorno = {
        ok: false, 
        id: null,
        count: 0
    };
    try {
        if (Object.keys(objeto).length > 0) {
            let command = repository.Gravar(objeto);
            conn = await pool.getConnection();
    
            const rows = await conn.query(command);            
            retorno.id = rows;
        }
        retorno.ok = true;                        
        retorno.count = 0;
    }
    catch(exception) { 
        if(conn) {
            conn.end;
        }
        throw exception;
    }
    return retorno;
}
const deleteById = (id = NaN) => {
    let conn;
    try{
        let command = repository.Delete(id);
    }
    catch(exception) {
        if(conn) {
            conn.end;
        }
    }
}
<<<<<<< HEAD
const getBicicletasByUsuario = (usuario = NaN) => {
    let command;
    repoBicicleta.GetByUsuario(usuario);
};
const getTrajetosByUsuario = (usuario = NaN) => {
        let command;
        repoTrajeto.GetByUsuario(usuario);
};

export const FindById = findById, Gravar = gravar, 
             Delete = deleteById, 
             GetBicicletasByUsuario = getBicicletasByUsuario,
             GetTrajetosByUsuario = getTrajetosByUsuario;
=======
export const FindById = findById, Gravar = gravar, Delete = deleteById;const getBicicletasByUsuario = (usuario = NaN) => {
    let command;
    repoBicicleta.GetByUsuario(usuario);
};
>>>>>>> 1a80ee3b74543d9761f07e39b80dcd5c722b5818
